name: "Push to Docker Hub"

on:
    push:
    workflow_dispatch:

jobs:
    build-and-push:
        runs-on: ubuntu-latest
        steps: 
            - name: checkout 
              uses: actions/checkout@v3
            - name: build images
              run: |
                docker build -t cfculler/dks_api:v1.0.1 /home/runner/work/knowledge-share/knowledge-share/api/Dockerfile
                docker build -t cfculler/dks_ui:v1.0.1 /home/runner/work/knowledge-share/knowledge-share/ui/Dockerfile

            - name: Log in to Docker Hub
              uses: docker/login-action@v1
              with:
                username: ${{ secrets.DOCKER_USERNAME }}
                password: ${{ secrets.DOCKER_PASSWORD }}
              
            - name: Push the image to Docker Hub
              run: |
                docker push cfculler/dks_api:v1.0.1
                docker push cfculler/dks_ui:v1.0.1
